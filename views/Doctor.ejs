<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=Ddevice-width, initial-scale=1.0">
        <title>Doctor Test</title>
        <link rel="icon" href="images/favicon.ico">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link rel="stylesheet" href="Msg.css">
        <link rel="stylesheet" href="doc.css">

        


    </head>
<body>


        <div class="header">
            <div class="side-nav">
                <a href="#" class="logo">
                    <img img="doctor.png" class="logo-img">
                    <img src="logo-icon.png" class="logo-icon">
                </a>
                <ul class="nav-links">
                    <li><h1 class="headingb"> <span>Welcome Doctor:</span> <%=doctor.FirstName  %> <%=doctor.LastName%> </h1></li>
                    <li><a href="#first"><i class="fas fa-house-user"></i><p>Patient Queue</p></a></li>
                    <li><a href="#second"><i class="fas fa-comment-dots"></i><p>My Messeages</p></a></li>
                    <li><a href="#three"><i class="fas fa-comment-dots"></i><p>Blood Tests</p></a></li>
                    <li><a href="EditDoctor"><i class="fas fa-comment-dots"></i><p>Edit</p></a></li>
                    <li><a href="Log-In.html"><i class="fas fa-comment-dots"></i><p>Logout</p></a></li>
                   
                </ul>
            </div>
        </div>
        
        <div class="wrapper" id="first">
            <h1 class="heading"> <span>Patient</span> Queue </h1>
        <section >
            
            <div class="table-wrapper-scroll-y my-custom-scrollbar">
            
                <table class="container" >
    
                    
                    <thead>
                        <tr>
                            <th><h1>First Name</h1></th>
                            <th><h1>Last Name</h1></th>
                            <th><h1>ID</h1></th>
                            <th><h1>E-mail</h1></th>
                            <th><h1>Gender</h1></th>
                            <th><h1>Age</h1></th>
                        </tr>
                    </thead>
                    <tbody>
                        <%patientslist.forEach(user=>{ %> 
                           <% if(user.role == "Patient"){ %>
                        <tr>
                            <td><%= user.FirstName%></td>
                            <td><%= user.LastName%></td>
                            <td><%= user.id%></td>
                            <td><%= user.email%></td>
                            <td><%= user.Gender%></td>
                            <td><%= user.Age%></td>
                            <td><a href="Home.html"><button>View</button></a></td>
                        </tr>
                    <%}%>
                    <%})%>
                    </tbody>
                </table>
    
            </div>
        
        </section>
    </div>

    <div class="wrapper" id="second">
        <h1 class="heading"> <span>My</span> Messages </h1>
    <section >
        
        <div class="table-wrapper-scroll-y my-custom-scrollbar">
        
            <table id="messagestable" class="container" >

                
                <thead>
                    <tr>
                        <th><h1>Patient Name</h1></th>
                        <th><h1>Patient ID</h1></th>
                        <th><h1>Message Date</h1></th>
                        <th><h1>Subject</h1></th>
                        <th><h1>View</h1></th>
                        
                    </tr>
                </thead>
                <tbody>
                    <%messagess.forEach(message=>{ %> 
                        
                        <% if(message.reciever == doctor.id){ %>
                            <%patientslist.forEach(user=>{ %> 
                                <% if(user.id == message.sender){ %>
                             <tr>
                                 <td><%= user.FirstName%> &nbsp <%= user.LastName%></td>
                                 <td><%= user.id%></td>
                                 <td><%= message.sent%></td>
                                 <td><%= message.Subject%></td>
                                 <td><button id= <%= message._id %> onclick="openForm(<%= JSON.stringify(message) %>)" class="openForm" >View Message</button></td>
                             </tr>
                         <%}%>
                         <%})%>
                     
                 <%}%>
                 <%})%>
                 
                </tbody>
            </table>

        </div>
     
     <div class="form-popup" id="myForm">
        <form action="/action_page.php" class="form-container">
         <br> <label id="messagefrom" type="text" for="email"></label></br>
         <br> <label id="messagesubject" type="text" ></label></br>
         <br> <label id="messagecontent" type="text" ></label></br>
          <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
        </form>
      </div>
    </section>
</div>
<div class="wrapper" id="three">
    <h1 class="heading"> <span>Blood</span> Tests </h1>
<section >
    <div class="table-wrapper-scroll-y my-custom-scrollbar">
    
        <table id="BloodTestTable" class="container" >
            <thead>
                <tr>
                    <th><h1>First Name</h1></th>
                    <th><h1>Last Name</h1></th>
                    <th><h1>ID</h1></th>
                    <th><h1>E-mail</h1></th>
                    <th><h1>Gender</h1></th>
                    <th><h1>Age</h1></th>
                </tr>
            </thead>
            <tbody>
                <%blood.forEach(bloodtest=>{ %> 
                <%patientslist.forEach(user=>{ %> 
                   
                        
                            <% if(user.role == "Patient"){ %>
                            <% if(user.id == bloodtest.id){ %>
                <tr>
                    <td><%= user.FirstName%></td>
                    <td><%= user.LastName%></td>
                    <td><%= user.id%></td>
                    <td><%= user.email%></td>
                    <td><%= user.Gender%></td>
                    <td><%= user.Age%></td>
                    <td><button id= <%= bloodtest._id %> onclick="openbloodtest(<%= JSON.stringify(bloodtest) %>)" class="openbloodtest" >View blood tests result</button></td>
                </tr>
            <%}%>
            <%}%>
            <%})%>
            <%})%>
            </tbody>
        </table>

    </div>
         
    <div class="form-popup" id="mybloodForm">
        <form action="/action_page.php" class="form-container">
         <br> <label id="BloodTestID" type="text" ></label></br>
         <br> <label id="Age" type="text" ></label></br>
         <br> <label id="WBC" type="text" ></label></br>
         <br> <label id="neut" type="text" ></label></br>
         <br> <label id="lymph" type="text" ></label></br>
         <br> <label id="rbc" type="text" ></label></br>
         <br> <label id="hct" type="text"></label></br>
         <br> <label id="urea" type="text" ></label></br>
         <br> <label id="hb" type="text" ></label></br>
         <br> <label id="creatine" type="text" ></label></br>
         <br> <label id="iron" type="text" ></label></br>
         <br> <label id="ap" type="text" ></label></br>
         <br>
         <br>
          <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
        </form>
      </div>
        

</section>
</div>



        <script src="https://kit. fontawesome.com/c4254e24a8.js" crossorigin="anonymous"></script>
        <script>
            function openForm(message) {
              
                
                console.log(message);
                
               console.log(message=== null ? "novaluesent": message);
               
               document.getElementById("messagefrom").textContent= "Message From: " +message.sender;
               document.getElementById("messagesubject").textContent= "Message Subject: " +message.Subject;
               document.getElementById("messagecontent").textContent= "Message From: " +message.Mbody;
              document.getElementById("myForm").style.display = "block";
              document.getElementById("messagestable").style.display = "none";
              
            }
            
            function closeForm() {
              document.getElementById("myForm").style.display = "none";
              document.getElementById("messagestable").style.display = "table";
              document.getElementById("mybloodForm").style.display = "none";
              document.getElementById("BloodTestTable").style.display = "table";
            }

            function openbloodtest(bloodtest) {
              
                
              console.log(bloodtest);
              
             console.log(bloodtest=== null ? "novaluesent": bloodtest);
             
             document.getElementById("BloodTestID").textContent= "Id:" +bloodtest.id;
             document.getElementById("Age").textContent= "Age:" +bloodtest.age;
             document.getElementById("WBC").textContent= "WBC:" +bloodtest.wbc;
             document.getElementById("neut").textContent= "neut:" +bloodtest.neut;
             document.getElementById("lymph").textContent= "lymph:" +bloodtest.lymph;
             document.getElementById("rbc").textContent= "rbc:" +bloodtest.rbc;
             document.getElementById("hct").textContent= "hct:" +bloodtest.hct;
             document.getElementById("urea").textContent= "urea:" +bloodtest.urea;
             document.getElementById("hb").textContent= "hb:" +bloodtest.hb;
             document.getElementById("creatine").textContent= "creatine:" +bloodtest.creatine;
             document.getElementById("iron").textContent= "iron:" +bloodtest.iron;
             document.getElementById("ap").textContent= "ap:" +bloodtest.ap;
            document.getElementById("mybloodForm").style.display = "block";
            document.getElementById("BloodTestTable").style.display = "none";
            
            
          }
    
            </script>

        
      

    
</body>
</html>
</html>